<style csss></style>
<script src="https://cdn.jsdelivr.net/gh/orstavik/doubledots@main25.05.13.13/dd.js"></script>
<script type="module"
  src="https://cdn.jsdelivr.net/gh/orstavik/doubledots@main25.05.13.13/ddx.js?fetch_json&oi.~&el.~&at.~&embrace&Input&Csss&Class"
  _:define></script>
<script>
  const stringTemplate = (pattern, ...args) => args.reduce((p, v, i) => p.replaceAll(`\${${i}}`, v), pattern);
  document.Reactions.define("string-template", stringTemplate);

  let prev;
  function nextSiblingClass(v) {
    const el = this.ownerElement.nextElementSibling;
    prev && el.classList.remove(prev);
    el.setAttribute("class", el.getAttribute("class") + " " + v);
  }
  document.Reactions.define("nextclass", nextSiblingClass);
</script>

<details open>
  <summary>Posts</summary>
  <input type="text" id="search" name="search" placeholder="Search..."
    input:el.value:at.value:string-template:nextclass='|![search*="${0}"]$display(none)'>

  <ol template: id="posts" _::fetch_json:oi.value:embrace="/api/snap" class="bob">
    <!--<template for="post of $"> -->
    <li type="{{post.type}}" search="{{post.title}}{{post.name}}">
      <a href="?post={{$post}}">
        <span>{{post.type}}: {{post.title}}{{post.name}}</span>
      </a>
    </li>
    <!--</template> -->
  </ol>
</details>